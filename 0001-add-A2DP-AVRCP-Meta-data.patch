From: loueradun
Date: Fri, 15 Mar 2013
Subject: [PATCH] add A2DP/AVRCP Meta-data

---
 .../com/pandora/android/activity/NowPlaying.smali  | 36 +++++++++++++++++++++-
 1 file changed, 35 insertions(+), 1 deletion(-)

diff --git a/smali/com/pandora/android/activity/NowPlaying.smali b/smali/com/pandora/android/activity/NowPlaying.smali
index 5b1cc45..806c10c 100644
--- a/smali/com/pandora/android/activity/NowPlaying.smali
+++ b/smali/com/pandora/android/activity/NowPlaying.smali
@@ -2685,7 +2685,7 @@
 .end method
 
 .method private setTrackLabels()V
-    .locals 4
+    .locals 7
 
     .prologue
     .line 1380
@@ -2699,6 +2699,19 @@
 
     .line 1383
     :cond_0
+
+    new-instance v4, Landroid/content/Intent;
+
+    const-string v5, "com.android.music.metachanged"
+
+    invoke-direct {v4, v5}, Landroid/content/Intent;-><init>(Ljava/lang/String;)V
+
+    const-string v5, "id"
+
+    const/4 v6, 0x1
+
+    invoke-virtual {v4, v5, v6}, Landroid/content/Intent;->putExtra(Ljava/lang/String;I)Landroid/content/Intent;
+
     iget-object v0, p0, Lcom/pandora/android/activity/NowPlaying;->_songTitleTextView:Landroid/widget/TextView;
 
     iget-object v1, p0, Lcom/pandora/android/activity/NowPlaying;->_trackData:Lcom/pandora/android/data/TrackData;
@@ -2713,6 +2726,10 @@
 
     invoke-virtual {v0, v1}, Landroid/widget/TextView;->setText(Ljava/lang/CharSequence;)V
 
+    const-string v5, "track"
+
+    invoke-virtual {v4, v5, v1}, Landroid/content/Intent;->putExtra(Ljava/lang/String;Ljava/lang/String;)Landroid/content/Intent;
+
     .line 1384
     iget-object v0, p0, Lcom/pandora/android/activity/NowPlaying;->_artistTextView:Landroid/widget/TextView;
 
@@ -2728,6 +2745,10 @@
 
     invoke-virtual {v0, v1}, Landroid/widget/TextView;->setText(Ljava/lang/CharSequence;)V
 
+    const-string v5, "artist"
+
+    invoke-virtual {v4, v5, v1}, Landroid/content/Intent;->putExtra(Ljava/lang/String;Ljava/lang/String;)Landroid/content/Intent;
+
     .line 1385
     iget-object v0, p0, Lcom/pandora/android/activity/NowPlaying;->_albumTextView:Landroid/widget/TextView;
 
@@ -2743,6 +2764,18 @@
 
     invoke-virtual {v0, v1}, Landroid/widget/TextView;->setText(Ljava/lang/CharSequence;)V
 
+    const-string v5, "album"
+
+    invoke-virtual {v4, v5, v1}, Landroid/content/Intent;->putExtra(Ljava/lang/String;Ljava/lang/String;)Landroid/content/Intent;
+
+    const-string v5, "playing"
+
+    const-string v6, "JustPlaying"
+
+    invoke-virtual {v4, v5, v6}, Landroid/content/Intent;->putExtra(Ljava/lang/String;Ljava/lang/String;)Landroid/content/Intent;
+
+ 	invoke-virtual {p0, v4}, Landroid/content/Context;->sendBroadcast(Landroid/content/Intent;)V
+
     .line 1386
     iget-object v0, p0, Lcom/pandora/android/activity/NowPlaying;->_trackData:Lcom/pandora/android/data/TrackData;
 
-- 

